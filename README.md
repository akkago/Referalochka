# Referal App

Веб-приложение для управления проектами и профилями пользователей, построенное на Vue 3 + Vuetify + Tailwind CSS + TypeScript.

## 🚀 Особенности

- **Современный стек**: Vue 3, Vuetify 3, Tailwind CSS, TypeScript
- **Адаптивный дизайн**: Полностью адаптивный интерфейс
- **Типизация**: Полная типизация с TypeScript
- **Компонентная архитектура**: Модульная структура с переиспользуемыми компонентами
- **Валидация форм**: Встроенная валидация с кастомными правилами
- **Навигация**: Интуитивная навигация с активными состояниями

## 📁 Структура проекта

```
src/
├── components/          # Vue компоненты
│   ├── AppHeader.vue
│   ├── AppNavigation.vue
│   ├── FormProgress.vue
│   ├── InvestorProfileCard.vue
│   ├── PartnerFormCard.vue
│   ├── ProjectCard.vue
│   ├── ProjectFilters.vue
│   ├── RequisitesCard.vue      # 🆕 Новый компонент реквизитов
│   ├── DeleteRequisitesModal.vue # 🆕 Модальное окно удаления
│   ├── InvestorProfileCard.vue # 🆕 Обновлен для отображения заполненной анкеты
│   ├── UserProjectCard.vue     # 🆕 Карточка проекта пользователя
│   ├── UserProjectFilters.vue  # 🆕 Фильтры для проектов пользователя
│   ├── UserProjectsView.vue    # 🆕 Основной компонент "Мои проекты"
│   ├── AddProjectForm.vue      # 🆕 Форма добавления проекта
│   ├── EditProjectForm.vue     # 🆕 Форма редактирования проекта
│   └── ReferralLinksForm.vue   # 🆕 Форма реферальных ссылок
├── composables/         # Vue composables
│   ├── useApplicationForm.ts
│   ├── useInvestorForm.ts
│   ├── useNavigation.ts
│   ├── usePartnerForm.ts
│   ├── useProfile.ts
│   ├── useProjects.ts
│   ├── useRequisites.ts        # 🆕 Composable для реквизитов
│   ├── useDeleteModal.ts       # 🆕 Composable для модальных окон
│   ├── useFilledInvestorForm.ts # 🆕 Composable для заполненной анкеты
│   ├── useUserProjects.ts      # 🆕 Composable для проектов пользователя
│   ├── useAddProject.ts        # 🆕 Composable для добавления проекта
│   ├── useEditProject.ts       # 🆕 Composable для редактирования проекта
│   ├── useReferralLinks.ts     # 🆕 Composable для реферальных ссылок
│   └── useUser.ts
├── constants/           # Константы приложения
│   ├── index.ts
│   ├── requisites.ts           # 🆕 Константы для реквизитов
│   ├── modals.ts               # 🆕 Константы для модальных окон
│   ├── investorForm.ts         # 🆕 Константы для анкеты инвестора
│   ├── userProjects.ts         # 🆕 Константы для проектов пользователя
│   ├── addProject.ts           # 🆕 Константы для добавления проекта
│   ├── editProject.ts          # 🆕 Константы для редактирования проекта
│   └── referralLinks.ts        # 🆕 Константы для реферальных ссылок
├── data/               # Mock данные
│   └── mockData.ts
├── router/             # Vue Router конфигурация
│   └── index.ts
├── types/              # TypeScript интерфейсы
│   └── index.ts
├── utils/              # Утилиты
│   ├── formatters.ts
│   ├── validation.ts
│   ├── requisitesValidation.ts # 🆕 Валидация реквизитов
│   └── formValidation.ts       # 🆕 Валидация форм
├── views/              # Vue страницы
│   ├── ApplicationView.vue
│   ├── InvestorFormView.vue
│   ├── PartnerFormView.vue
│   ├── ProfileView.vue
│   ├── ProjectsView.vue
│   ├── RequisitesView.vue      # 🆕 Страница реквизитов
│   ├── UserProjectsView.vue    # 🆕 Страница "Мои проекты"
│   ├── AddProjectView.vue      # 🆕 Страница добавления проекта
│   └── EditProjectView.vue     # 🆕 Страница редактирования проекта
└── main.ts
```

## 🆕 Новый компонент: Реквизиты

### Описание
Компонент для управления реквизитами компании, включающий:
- **Данные компании**: полное и краткое название, ИНН, КПП, ОГРН, адреса
- **Информация о руководителе**: должность, ФИО, основание
- **Банковские реквизиты**: добавление, удаление, установка по умолчанию

### Функциональность
- ✅ Редактирование всех полей реквизитов
- ✅ Валидация ИНН, КПП, ОГРН, БИК
- ✅ Динамическое добавление/удаление банковских реквизитов
- ✅ Установка реквизитов по умолчанию
- ✅ Сохранение и обновление данных
- ✅ Адаптивный дизайн
- ✅ Модальное окно подтверждения удаления

### Навигация
- Маршрут: `/requisites`
- Иконка: `mdi-bank`
- Название: "Реквизиты"

### Использование
```vue
<template>
  <RequisitesCard
    :initial-data="requisitesData"
    @submit="handleSubmit"
    @cancel="handleCancel"
    @update="handleUpdate"
  />
</template>
```

## 🆕 Модальное окно удаления реквизитов

### Описание
Модальное окно для подтверждения удаления банковских реквизитов с возможностью отмены операции.

### Функциональность
- ✅ Подтверждение удаления с предупреждением
- ✅ Возможность отмены операции
- ✅ Закрытие по клику на крестик
- ✅ Адаптивный дизайн
- ✅ Интеграция с формой реквизитов

### Использование
```vue
<template>
  <DeleteRequisitesModal
    :config="deleteModalConfig"
    @confirm="handleDeleteConfirm"
    @cancel="handleDeleteCancel"
    @close="handleDeleteClose"
  />
</template>
```

### Composable для управления модальными окнами
```typescript
const { deleteModalConfig, openDeleteModal, closeDeleteModal, setDeleteModalCallbacks } = useDeleteModal()
```

## 🆕 Обновленный InvestorProfileCard

### Описание
Компонент `InvestorProfileCard` был расширен для отображения как пустого состояния (призыв к заполнению анкеты), так и заполненного состояния анкеты инвестора с предупреждением об отклонении.

### Функциональность
- ✅ **Пустое состояние**: Отображение призыва к заполнению анкеты с кнопками действий
- ✅ **Заполненное состояние**: Отображение всех заполненных полей анкеты
- ✅ Предупреждение об отклонении с причиной
- ✅ Форматирование валюты для инвестиционных сумм
- ✅ Отображение выбранных категорий с иконками
- ✅ Возможность редактирования и повторной отправки
- ✅ Адаптивный дизайн
- ✅ Автоматическое переключение между состояниями

### Использование
```vue
<template>
  <InvestorProfileCard 
    :form-data="investorFormData"
    :rejection-warning="rejectionWarning"
    @action-click="handleActionClick"
    @edit="handleEdit"
    @resubmit="handleResubmit"
  />
</template>
```

### Логика переключения состояний
Компонент автоматически определяет, какое состояние отображать:
- **Пустое состояние**: когда `formData` не передан или равен `undefined`
- **Заполненное состояние**: когда `formData` передан с данными

### Composable для управления заполненной анкетой
```typescript
const { formData, warning, resubmitForm } = useFilledInvestorForm()
```

## 🆕 Страница "Мои проекты"

### Описание
Страница для управления проектами пользователя с возможностью просмотра, редактирования и управления статусом проектов.

### Функциональность
- ✅ **Поиск проектов**: поиск по названию и ID проекта
- ✅ **Фильтрация**: по стадии, отрасли, региону и типу проекта
- ✅ **Карточки проектов**: отображение статуса, метрик, ссылок
- ✅ **Управление статусом**: включение/отключение проектов
- ✅ **Копирование данных**: ID проекта и ссылки на проект
- ✅ **Редактирование**: переход к редактированию проекта
- ✅ **Добавление проектов**: создание новых проектов
- ✅ **Адаптивный дизайн**: поддержка мобильных устройств
- ✅ **Состояния загрузки**: индикаторы загрузки и пустые состояния

### Навигация
- Маршрут: `/user-projects`
- Название: "Мои проекты"
- Доступ через меню: "Мои проекты"

### Компоненты

#### UserProjectCard.vue
Карточка отдельного проекта с информацией о статусе, метриках и действиях.

**Функции:**
- Отображение статуса проекта с цветовой индикацией
- Показ метрик (просмотры, комментарии) с тултипами
- Переключатель включения/отключения проекта
- Копирование ID и ссылки проекта
- Кнопка редактирования

#### UserProjectFilters.vue
Компонент фильтров и поиска для проектов.

**Функции:**
- Поиск по названию и ID
- Фильтры по стадии, отрасли, региону, типу
- Кнопка добавления нового проекта
- Адаптивная компоновка

#### UserProjectsView.vue
Основной компонент страницы с сеткой проектов.

**Функции:**
- Отображение сетки карточек проектов
- Обработка состояний загрузки и пустых результатов
- Интеграция с фильтрами и поиском
- Управление проектами через composable

### Использование
```vue
<template>
  <UserProjectsView />
</template>

<script setup lang="ts">
import UserProjectsView from '@/components/UserProjectsView.vue'
</script>
```

### Composable для управления проектами
```typescript
const {
  isLoading,
  projects,
  filters,
  loadProjects,
  updateFilters,
  toggleProject,
  editProject,
  addProject,
  copyToClipboard
} = useUserProjects()
```

### Mock данные
Проекты содержат следующие поля:
- `id`: уникальный идентификатор проекта
- `title`: название проекта
- `date`: дата создания
- `status`: статус проекта (moderation, active, draft, rejected)
- `statusText`: текстовое представление статуса
- `projectLink`: ссылка на проект
- `views`: количество просмотров
- `shares`: количество комментариев/поделились
- `isEnabled`: включен ли проект

### Константы
Все тексты и опции фильтров вынесены в отдельные константы:
- `USER_PROJECTS_SECTIONS`: заголовки и кнопки
- `USER_PROJECTS_FILTERS`: названия фильтров
- `USER_PROJECT_STATUSES`: статусы проектов
- `USER_PROJECT_ACTIONS`: действия с проектами
- `USER_PROJECT_METRICS`: метрики проектов
- `PROJECT_STAGES`, `PROJECT_INDUSTRIES`, `PROJECT_REGIONS`, `PROJECT_TYPES`: опции фильтров

## 🆕 Страница "Добавление проекта"

### Описание
Страница для создания нового проекта с подробной формой заполнения и настройками реферальных ссылок.

### Функциональность
- ✅ **Две вкладки**: "Описание" (активная) и "Реферальные ссылки"
- ✅ **Основная информация**: регион, тип проекта, отрасль, стадия
- ✅ **Описание проекта**: заголовок и краткое описание
- ✅ **Ссылка на проект**: с префиксом https:// и описанием
- ✅ **Настройки переходов**: кто может переходить, стратегия оплаты
- ✅ **Ограничения**: количество переходов, бюджет, дата отключения
- ✅ **Валидация форм**: проверка обязательных полей
- ✅ **Адаптивный дизайн**: поддержка мобильных устройств
- ✅ **Состояния загрузки**: индикаторы при отправке формы

### Навигация
- Маршрут: `/add-project`
- Название: "Добавление проекта"
- Доступ: через кнопку "Добавить проект" на странице "Мои проекты"

## 🆕 Страница "Редактирование проекта"

### Описание
Страница для редактирования существующего проекта с возможностью управления рекламой и настройками переходов.

### Функциональность
- ✅ **Заголовок с ID проекта**: отображение ID проекта в заголовке
- ✅ **Переключатель включения**: включение/отключение проекта
- ✅ **Две вкладки**: "Описание" (активная) и "Реферальные ссылки"
- ✅ **Основная информация**: регион, тип проекта, отрасль, стадия
- ✅ **Описание проекта**: заголовок и краткое описание
- ✅ **Ссылка на проект**: с префиксом https:// и описанием
- ✅ **Настройки переходов**: кто может переходить, стратегия оплаты
- ✅ **Информационная панель**: стоимость перехода, итого, баланс
- ✅ **Ограничения**: количество переходов, бюджет, дата отключения
- ✅ **Три кнопки действий**: Отмена, Остановить рекламу, Запустить рекламу
- ✅ **Валидация форм**: проверка обязательных полей
- ✅ **Адаптивный дизайн**: поддержка мобильных устройств
- ✅ **Состояния загрузки**: индикаторы при отправке формы

### Навигация
- Маршрут: `/edit-project/:id`
- Название: "Редактирование проекта"
- Доступ: через кнопку "Редактировать" на странице "Мои проекты"

### Компоненты

#### AddProjectForm.vue
Основная форма добавления проекта с двумя секциями.

**Секция "Добавление проекта":**
- Выпадающие списки для региона, типа, отрасли, стадии
- Поля для заголовка и описания проекта
- Поле ссылки с префиксом https://

**Секция "Настройка стоимость перехода":**
- Радиокнопки для выбора аудитории (Все/Авторизованные/Инвесторы)
- Радиокнопки для стратегии оплаты (Количество переходов/Срок публикации)
- Числовые поля для ограничений
- Поле даты отключения

#### AddProjectView.vue
View-компонент для страницы добавления проекта.

**Функции:**
- Обработка отправки формы
- Навигация назад при отмене
- Перенаправление на страницу проектов после создания

#### EditProjectForm.vue
Основная форма редактирования проекта с дополнительными функциями.

**Заголовок с ID проекта:**
- Отображение ID проекта в заголовке
- Переключатель включения/отключения проекта

**Секция "Редактирование проекта":**
- Выпадающие списки для региона, типа, отрасли, стадии
- Поля для заголовка и описания проекта
- Поле ссылки с префиксом https://

**Секция "Настройка стоимость перехода":**
- Радиокнопки для выбора аудитории (Все/Авторизованные/Инвесторы)
- Радиокнопки для стратегии оплаты (Количество переходов/Срок публикации)
- Числовые поля для ограничений
- Информационная панель с стоимостью перехода, итого и балансом
- Поле даты отключения

**Кнопки действий:**
- Отмена (текстовая кнопка)
- Остановить рекламу (текстовая кнопка)
- Запустить рекламу (основная кнопка)

#### EditProjectView.vue
View-компонент для страницы редактирования проекта.

**Функции:**
- Загрузка данных проекта по ID из URL
- Обработка отправки формы
- Обработка переключения статуса проекта
- Обработка остановки/запуска рекламы
- Навигация назад при отмене
- Перенаправление на страницу проектов после сохранения

### Использование
```vue
<template>
  <AddProjectForm
    :initial-data="initialFormData"
    @submit="handleSubmit"
    @cancel="handleCancel"
  />
</template>

<script setup lang="ts">
import AddProjectForm from '@/components/AddProjectForm.vue'
import type { AddProjectForm } from '@/types'

const handleSubmit = (form: AddProjectForm) => {
  console.log('Project created:', form)
  // API call to create project
}

const handleCancel = () => {
  // Navigate back
}
</script>
```

### Composable для управления формой
```typescript
const {
  isLoading,
  error,
  form,
  formState,
  isFormValid,
  validateField,
  validateForm,
  resetForm,
  submitForm,
  updateForm
} = useAddProject()
```

### Composable для редактирования проекта
```typescript
const {
  isLoading,
  error,
  form,
  formState,
  isFormValid,
  validateField,
  validateForm,
  loadProject,
  resetForm,
  submitForm,
  updateForm,
  toggleProject,
  stopAdvertising,
  launchAdvertising
} = useEditProject()
```

### Mock данные
Форма содержит следующие поля:
- `region`: регион проекта (выбор из списка)
- `projectType`: тип проекта (выбор из списка)
- `industry`: отрасль (выбор из списка)
- `projectStage`: стадия проекта (выбор из списка)
- `about.headline`: заголовок проекта (3-4 слова)
- `about.description`: описание проекта
- `projectLink`: ссылка на проект
- `transitionSettings`: настройки переходов и ограничений

**Заполненные данные для демонстрации:**
- `filledAddProjectForm`: содержит пример заполненной формы с реалистичными данными
- `initialAddProjectForm`: пустая форма для создания новых проектов
- `editProjectFormData`: содержит данные для редактирования проекта с ID 000342

### Константы
Все тексты и опции вынесены в отдельные константы:
- `ADD_PROJECT_SECTIONS`: названия секций
- `ADD_PROJECT_TABS`: вкладки формы
- `ADD_PROJECT_FIELDS`: поля формы с плейсхолдерами
- `TRANSITION_SETTINGS`: настройки переходов
- `ADD_PROJECT_ACTIONS`: кнопки действий
- `REGIONS`, `PROJECT_TYPES_ADD`, `INDUSTRIES_ADD`, `PROJECT_STAGES_ADD`: опции выбора

**Константы для редактирования проекта:**
- `EDIT_PROJECT_SECTIONS`: названия секций
- `EDIT_PROJECT_TABS`: вкладки формы
- `EDIT_PROJECT_FIELDS`: поля формы с плейсхолдерами
- `TRANSITION_SETTINGS_EDIT`: настройки переходов
- `EDIT_PROJECT_ACTIONS`: кнопки действий
- `TRANSITION_COST_INFO`: информация о стоимости переходов
- `REGIONS_EDIT`, `PROJECT_TYPES_EDIT`, `INDUSTRIES_EDIT`, `PROJECT_STAGES_EDIT`: опции выбора

## 🆕 Страница "Реферальные ссылки"

### Описание
Страница для управления реферальными ссылками пользователя, включающая:
- **Статистика**: общая статистика по всем ссылкам (количество, переходы, конверсии, заработок)
- **Список ссылок**: отображение всех созданных реферальных ссылок
- **Создание ссылок**: форма для создания новых реферальных ссылок
- **Редактирование**: возможность редактирования существующих ссылок
- **Копирование**: возможность копирования ссылки в буфер обмена
- **Удаление**: возможность удаления ссылки с подтверждением

### Функциональность
- ✅ **Статистика**: отображение общей статистики по всем ссылкам
- ✅ **Создание ссылок**: форма с валидацией для создания новых ссылок
- ✅ **Редактирование ссылок**: возможность изменения существующих ссылок
- ✅ **Копирование ссылок**: одной кнопкой в буфер обмена
- ✅ **Удаление ссылок**: с подтверждением
- ✅ **Валидация форм**: проверка обязательных полей и форматов
- ✅ **Адаптивный дизайн**: поддержка мобильных устройств
- ✅ **Состояния загрузки**: индикаторы загрузки и отправки

### Навигация
- Маршрут: `/referral-links`
- Название: "Реферальные ссылки"
- Доступ: через кнопку меню "Реферальные ссылки" в левой навигации

### Компоненты

#### ReferralLinksForm.vue
Основной компонент для управления реферальными ссылками.

**Функции:**
- Отображение статистики в виде карточек
- Табы для переключения между списком ссылок и созданием
- Список всех реферальных ссылок с возможностью редактирования/удаления
- Форма создания/редактирования ссылки
- Валидация всех полей формы

**Секции:**
- **Статистика**: карточки с общими показателями
- **Все ссылки**: список существующих ссылок с действиями
- **Создать ссылку**: форма для создания новой ссылки



### Composable для управления реферальными ссылками
```typescript
const {
  isLoading,
  error,
  links,
  stats,
  form,
  formState,
  isFormValid,
  validateField,
  validateForm,
  loadLinks,
  createLink,
  updateLink,
  deleteLink,
  resetForm,
  updateForm,
  copyToClipboard
} = useReferralLinks()
```

### Mock данные
Страница содержит следующие данные:
- `referralLinks`: массив существующих реферальных ссылок
- `referralLinkStats`: общая статистика по всем ссылкам
- `initialReferralLinkForm`: пустая форма для создания новых ссылок

**Примеры ссылок:**
- Основная реферальная ссылка (активна, 1250 переходов)
- Ссылка для партнеров (активна, 890 переходов)
- Промо ссылка (неактивна, 567 переходов)
- Тестовая ссылка (активна, 234 перехода)

### Константы
Все тексты и опции вынесены в отдельные константы:
- `REFERRAL_LINKS_SECTIONS`: названия секций
- `REFERRAL_LINKS_TABS`: вкладки формы
- `REFERRAL_LINKS_FIELDS`: поля формы с плейсхолдерами и валидацией
- `REFERRAL_LINKS_ACTIONS`: кнопки действий
- `REFERRAL_LINKS_STATS`: названия статистических показателей
- `REFERRAL_LINKS_MESSAGES`: сообщения для пользователя

### Типы данных
```typescript
interface ReferralLink {
  id: string
  name: string
  url: string
  description: string
  isActive: boolean
  clicks: number
  conversions: number
  earnings: number
  createdAt: string
  updatedAt: string
}

interface ReferralLinkForm {
  name: string
  url: string
  description: string
  isActive: boolean
}

interface ReferralLinkStats {
  totalLinks: number
  activeLinks: number
  totalClicks: number
  totalConversions: number
  totalEarnings: number
}
```

## 🛠 Установка и запуск

### Требования
- Node.js 18+
- npm или yarn

### Установка зависимостей
```bash
npm install
```

### Запуск в режиме разработки
```bash
npm run dev
```

### Сборка для продакшена
```bash
npm run build
```

### Проверка типов
```bash
npm run type-check
```

## 🎨 Дизайн-система

### Цветовая палитра
- **Primary**: Синий (#2563eb)
- **Secondary**: Серый (#6b7280)
- **Success**: Зеленый (#10b981)
- **Warning**: Желтый (#f59e0b)
- **Error**: Красный (#ef4444)

### Компоненты
- **Кнопки**: Elevated, Outlined, Text варианты
- **Поля ввода**: Outlined стиль с валидацией
- **Карточки**: Белый фон с тенями
- **Навигация**: Боковая панель с активными состояниями

## 📱 Адаптивность

Приложение полностью адаптивно и поддерживает:
- **Мобильные устройства** (320px+)
- **Планшеты** (768px+)
- **Десктопы** (1024px+)
- **Большие экраны** (1280px+)

## 🔧 Технические детали

### Vue 3 Composition API
Все компоненты используют современный Composition API:
```typescript
import { ref, computed, onMounted } from 'vue'

export function useComponent() {
  const data = ref([])
  const computedValue = computed(() => data.value.length)
  
  onMounted(() => {
    // Инициализация
  })
  
  return { data, computedValue }
}
```

### TypeScript
Полная типизация всех интерфейсов и функций:
```typescript
interface RequisitesData {
  company: CompanyDetails
  head: HeadDetails
  bankRequisites: BankRequisite[]
}
```

### Vuetify 3
Использование компонентов Vuetify 3:
- `v-form` для валидации
- `v-text-field` для полей ввода
- `v-btn` для кнопок
- `v-card` для карточек
- `v-tabs` для табов

### Tailwind CSS
Утилитарные классы для стилизации:
```html
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
  <div class="bg-white rounded-lg border border-blue-200 p-8">
```

## 📋 Валидация

### Правила валидации
- **ИНН**: 10 цифр для юр. лиц, 12 цифр для ИП
- **КПП**: 9 цифр
- **ОГРН**: 13 цифр для юр. лиц, 15 цифр для ИП
- **БИК**: 9 цифр (не обязательное поле)
- **Обязательные поля**: проверка заполнения

### Кастомные валидаторы
```typescript
export const validateInn = (inn: string): ValidationResult => {
  const innRegex = /^\d{10}(\d{2})?$/
  return {
    isValid: innRegex.test(inn),
    message: 'Неверный формат ИНН'
  }
}
```

## 🚀 Развертывание

### Сборка
```bash
npm run build
```

### Результат сборки
- Оптимизированные файлы в папке `dist/`
- Минифицированные CSS и JS
- Готовые к развертыванию статические файлы

## 📚 Документация

Подробная документация по компоненту реквизитов находится в файле [REQUISITES_README.md](./REQUISITES_README.md).

## 🤝 Вклад в проект

1. Форкните репозиторий
2. Создайте ветку для новой функции
3. Внесите изменения
4. Добавьте тесты
5. Создайте Pull Request

## 📄 Лицензия

MIT License - см. файл [LICENSE](LICENSE) для деталей.

## 👥 Авторы

- Разработка: Команда разработчиков
- Дизайн: UI/UX команда
- Тестирование: QA команда
